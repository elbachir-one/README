<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>OpenBSD Post-Installation Guide</title>
		<link rel="stylesheet" href="openbsd_and_xfce4.css">
	</head>
	<body>
		<div class="container">
			<h1>OpenBSD</h1>
			<h2>Things to do after installing OpenBSD</h2>
			<hr>

			<h3>1. Set up user permissions</h3>
			<p>Login as <code>root</code> to configure <code>doas</code> for other users.<br>First, install a text editor:</p>
			<pre><code>pkg_add vim</code></pre>

			<pre><code>usermod -G operator &lt;user name&gt;
usermod -G wheel &lt;user name&gt; # To use doas</code></pre>

			<p>Edit the <code>doas</code> configuration file:</p>
			<pre><code>vim /etc/doas.conf</code></pre>

			<p>Add the following line:</p>
			<pre><code>permit persist :wheel</code></pre>

			<p>If you don't want to type your password every time when using <code>doas</code>, you can instead use:</p>
			<pre><code>permit nopass :wheel</code></pre>

			<hr>

			<h3>2. Update firmware and OpenBSD base system</h3>
			<pre><code>fw_update # To install missing driver
syspatch # Apply system patches</code></pre>

			<hr>

			<h3>3. Install a Desktop Environment (DE) / Window Manager (WM) and enable services</h3>
			<p>In this setup, we will install <strong>XFCE4</strong> and some useful extras:</p>
			<pre><code>pkg_add xfce xfce-extras xfce4-power-manager chromium</code></pre>

			<p>Enable and start necessary daemons:</p>
			<pre><code>rcctl enable apmd
rcctl start apmd

rcctl enable messagebus
rcctl start messagebus

rcctl enable xenodm</code></pre>

			<p>Exit the <code>root</code> user and longin as your user</p>
			<p>Create or edit your <code>.xsession</code> file in your home directory:</p>
			<pre><code>vim ~/.xsession</code></pre>

			<p>Add the following line to start XFCE4:</p>
			<pre><code>exec startxfce4</code></pre>

			<p>Finally, reboot:</p>
			<pre><code>doas shutdown -r now</code></pre>

			<hr>

			<h3>4. How to Remove the <code>xconsole</code> Window After Login</h3>

			<div class="note">
				<strong>NOTE:</strong> After you log in, a small window may pop up with <code>xenodm</code>. That is the <code>xconsole</code>.
			</div>

			<p>To get rid of it, follow these steps:</p>
			<ol>
				<li>Open the file <code>/etc/X11/xenodm/Xsetup_0</code> with <code>vim</code> (using <code>doas</code> for permission):</li>
				<pre><code>doas vim /etc/X11/xenodm/Xsetup_0</code></pre>
				<li>Find the line that mentions <code>xconsole</code>.</li>
				<li>Comment out that line by adding a <code>#</code> at the beginning.</li>
				<li>Save the file and exit <code>vim</code>.</li>
				<li>Reboot your system:</li>
				<pre><code>doas shutdown -r now</code></pre>
			</ol>

			<p>After rebooting, the <code>xconsole</code> window will no longer appear.</p>

			<hr>

			<footer>
				<p>Et voil√†!</p>
			</footer>

		</div>
	</body>
</html>
